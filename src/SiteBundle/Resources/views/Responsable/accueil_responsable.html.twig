{% extends '::base.html.twig' %}

{% block body %}

    <div class="jumbotron">
        <h2>Accueil responsable pédagogique</h2>
        Quicquid urbis coluntur liberis homines Romae nascitur urbis potest quorundam homines aestimant nec urbis
        liberis praeter Romae et credi pomerium et nec coluntur caelibes esse nec urbis caelibes inanes qua urbis vile
        Romae aestimant esse credi coluntur inanes praeter et aestimant liberis potest obsequiorum nascitur Romae extra
        nascitur liberis qua potest praeter flatus Romae qua obsequiorum coluntur inanes potest nec potest obsequiorum
        sine inanes homines nec pomerium potest diversitate quorundam inanes extra qua nec liberis homines diversitate
        pomerium et vile vile esse et diversitate urbis vero Romae urbis diversitate urbis flatus orbos vero vile vile
        obsequiorum caelibes aestimant homines nascitur.
        </br>

    </div>


    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#home">Gestion des offres</a></li>
        <li><a data-toggle="tab" href="#menu1">Gestion etudiant </a></li>
        <li><a data-toggle="tab" href="#menu2">Paramettre</a></li>
    </ul>

    <div class="tab-content">
        <div id="home" class="tab-pane fade in active">

                <div class="panel panel-danger">
                    <div class="panel-heading">
                        <h3>offres en attente de validation</h3>
                    </div>
                    <div class="panel-body">
                        <table>
                            <tr>
                                <th class="col-md-2">Date</th>
                                <th class="col-md-2">Titre de l'offre</th>
                                <th class="col-md-2 text-center">Entreprise</th>
                                <th class="col-md-2 text-center">Maître de stage</th>
                                <th class="col-md-2 text-center">Etat de l'offre</th>
                                <th class="col-md-2 text-center">Action</th>
                            </tr>

                            {% for offre in offres %}
                                {% if offre.etatOffre == 'En attente de validation' %}
                                    <tr>
                                        <td>{{ offre.DateDepot |date('d-m-Y') }}</td>
                                        <td>{{ offre.Titre }}</td>
                                        <td class="text-center">{{ offre.entreprise.RaisonSocial }}</td>
                                        <td class="text-center">{{ offre.entreprise.Prenom }} {{ offre.entreprise.Nom }}</td>
                                        <td class="text-center">
                                            <p class="text-danger">{{ offre.etatOffre }}</p>
                                        </td>
                                        <td class="text-center">
                                            <a href="{{ path('site_detailsAnnonceResponsable', {'offreId': offre.id }) }}"
                                               class="btn  btn-primary">A Valider</a>
                                        </td>

                                    </tr>
                                {% elseif offre.etatOffre == 'En attente de modification'  %}
                                    <tr>
                                        <td>{{ offre.DateDepot |date('d-m-Y') }}</td>
                                        <td>{{ offre.Titre }}</td>
                                        <td class="text-center">{{ offre.entreprise.RaisonSocial }}</td>
                                        <td class="text-center">{{ offre.entreprise.Prenom }} {{ offre.entreprise.Nom }}</td>
                                        <td class="text-center">
                                            <p class="text-warning">{{ offre.etatOffre }}</p>
                                        </td>
                                        <td class="text-center">
                                            <a href="{{ path('site_detailsAnnonceResponsable', {'offreId': offre.id }) }}"
                                               class="btn  btn-primary">A Valider</a>
                                        </td>

                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </table>
                    </div>

            </div>

        </div>

        <div id="menu1" class="tab-pane fade">

            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3>Liste des étudiants</h3>
                </div>
                <div class="panel-body">
                    <table>
                        <tr>
                            <th class="col-md-2 text-center">Etudiant</th>
                            <th class="col-md-2 text-center">état d'avancement</th>
                            <th class="col-md-2 text-center">Entreprise</th>
                            <th class="col-md-2 text-center">Maître de stage</th>
                            <th class="col-md-2 text-center">Tuteur pédagogique</th>
                            <th class="col-md-2 text-center">Action</th>
                        </tr>

                        {% for etudiant in etudiants %}
                            <tr>
                                <td>{{ etudiant.laPersone.prenom }} {{ etudiant.laPersone.nom }}</td>

                                {% if etudiant.DossierInscription.etatDossier == '0' %}
                                    <td><p class="text-danger">premier connexion</p></td>

                                {% elseif etudiant.DossierInscription.etatDossier == '1'  %}
                                    <td><p class="text-warning">Cherche une entreprise</p></td>

                                {% elseif etudiant.DossierInscription.etatDossier == '2'  %}
                                <td><p class="text-info">pré-inscription du Contrat</p></td>

                                {% elseif etudiant.DossierInscription.etatDossier == '3'  %}
                                <td>Dossier inscription pédagogique</td>

                                {% elseif etudiant.DossierInscription.etatDossier == '4'  %}
                                <td><p class="text-success">signature du contrat</p></td>
                                {% endif %}

                                {#<td>{{ dump(etudiant.DossierInscription) }}</td>#}
                                <td></td>
                                <td></td>
                                <td></td>

                                <td  class="text-center">
                                    {% if etudiant.DossierInscription.etatDossier == '2' %}
                                        <a href="{{path('validation_etat_etudiant', {'EtudiantId': etudiant.id }) }}" class="btn btn-primary" >A Valider</a>
                                    {% endif %}
                                </td>

                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
        <div id="menu2" class="tab-pane fade">
            <h3>Paramettre SMTP</h3>

            {{ form(smtp_form) }}

            <p></p>
        </div>
    </div>




{% endblock %}
